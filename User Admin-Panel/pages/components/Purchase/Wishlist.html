<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Wishlist Dashboard — Admin</title>

	<!-- Bootstrap (used by markup classes) -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/Sidebar.css">
	<link rel="stylesheet" href="/css/purchase-order.css">
	<link rel="stylesheet" href="/css/category.css">
	<link rel="stylesheet" href="/css/product.css">
</head>

<body>

	<!-- Sidebar container -->
	<div id="sidebar-container"></div>

	<!-- Navbar container -->
	<div id="navbar-container"></div>

	<main class="main-content custome-height-main-content" id="main-content">
		<div class="container-fluid">
			<div class="h_shoppingcart_cart-shell d-flex justify-content-center align-items-center w-100">

				<!-- Wishlist Table -->
				<div class="h_order-list">
					<div class="d-flex justify-content-between align-items-center mb-3">
						<h4 class="m-0">All Wishlists</h4>
					</div>

					<div class="table-responsive">
						<table class="table h_custom-table align-middle" id="wishlistTable">
							<thead>
								<tr>
									<th>Wishlist ID</th>
									<th>Customer</th>
									<th>Product</th>
									<th>Fabric</th>
									<th>Color</th>
									<th>Size</th>
									<th>Date Added</th>
									<th>Status</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody id="tableBody"></tbody>
						</table>
					</div>

					<!-- Pagination Controls -->
					<nav aria-label="Page navigation example" class="mt-3" id="paginationNav">
						<ul class="pagination justify-content-end align-items-center gap-3" id="pagination">
							<li class="page-item">
								<button id="prev" class="page-link cp-page-btn rounded">Previous</button>
							</li>
							<li class="page-item disabled">
								<span id="page-indicator" class="bg-transparent text-black"></span>
							</li>
							<li class="page-item">
								<button id="next" class="page-link cp-page-btn rounded">Next</button>
							</li>
						</ul>
					</nav>
				</div>
			</div>
			<!-- Custom Delete Modal -->
			<div class="custom-modal-overlay" id="deleteModal">
				<div class="custom-modal">
					<div class="custom-modal-header">Delete Item</div>
					<div class="custom-modal-body" id="deleteContent"></div>
					<div class="custom-modal-footer">
						<button class="custome_modal_btn h_cstm_modal-btn"
							onclick="closeModal('deleteModal')">Cancel</button>
						<button class="custome_modal_btn h_cstm_modal-btn" onclick="confirmDelete()">Delete</button>
					</div>
				</div>
			</div>
		</div>
	</main>

	<!-- Overlay for mobile -->
	<div class="overlay"></div>

	<!-- Bootstrap JS bundle -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="/js/sidebar-loader.js"></script>
	<script src="/js/navbar-loader.js"></script>

	<script>
		const wishlistData = [
			{ id: "W001", customer: "Rahul", product: "Cotton Shirt", fabric: "Cotton", color: "Red", size: "M", date: "20-Aug-2025", status: "Available" },
			{ id: "W002", customer: "Sneha", product: "Denim Jeans", fabric: "Denim", color: "Blue", size: "L", date: "19-Aug-2025", status: "Out of Stock" },
			{ id: "W003", customer: "Arjun", product: "Silk Kurta", fabric: "Silk", color: "Green", size: "S", date: "15-Aug-2025", status: "Moved to Cart" },
			{ id: "W004", customer: "Sagar", product: "Leather Jacket", fabric: "Leather", color: "Brown", size: "L", date: "05-Aug-2025", status: "Available" },
			{ id: "W005", customer: "Meera", product: "Wool Sweater", fabric: "Wool", color: "Black", size: "M", date: "10-Aug-2025", status: "Available" },
			{ id: "W005", customer: "Meera", product: "Wool Sweater", fabric: "Wool", color: "Black", size: "M", date: "10-Aug-2025", status: "Available" },
			{ id: "W005", customer: "Meera", product: "Wool Sweater", fabric: "Wool", color: "Black", size: "M", date: "10-Aug-2025", status: "Available" },
			{ id: "W005", customer: "Meera", product: "Wool Sweater", fabric: "Wool", color: "Black", size: "M", date: "10-Aug-2025", status: "Available" },
			{ id: "W005", customer: "Meera", product: "Wool Sweater", fabric: "Wool", color: "Black", size: "M", date: "10-Aug-2025", status: "Available" },
		];

		let currentPage = 1;
		const itemsPerPage = 6;

		const tableBody = document.getElementById("tableBody");
		const paginationNav = document.getElementById("paginationNav");

		function renderTable() {
	tableBody.innerHTML = "";
	const start = (currentPage - 1) * itemsPerPage;
	const end = start + itemsPerPage;
	const pageItems = wishlistData.slice(start, end);

	pageItems.forEach((item, index) => {
		const tr = document.createElement("tr");
		tr.innerHTML = `
			<td>#${item.id}</td>
			<td>${item.customer}</td>
			<td>${item.product}</td>
			<td>${item.fabric}</td>
			<td>${item.color}</td>
			<td>${item.size}</td>
			<td>${item.date}</td>
			<td>${item.status}</td>
			<td>
				<button class="btn btn-sm page-btn me-2 delete-btn" data-id="${item.id}" title="Delete">
					<i class="bi bi-trash"></i>
				</button>
				<button class="btn btn-sm page-btn cart-btn" data-id="${item.id}" title="Add to Cart">
					<i class="bi bi-cart-plus"></i>
				</button>
			</td>
		`;
		tableBody.appendChild(tr);
	});

	const totalPages = Math.ceil(wishlistData.length / itemsPerPage);
	if (totalPages <= 1) {
		paginationNav.style.display = "none";
	} else {
		paginationNav.style.display = "block";
		renderPagination();
	}

	// ✅ Delete button event
	document.querySelectorAll(".delete-btn").forEach(btn => {
		btn.addEventListener("click", () => {
			const id = btn.getAttribute("data-id");
			openDeleteModal(id);
		});
	});

	// ✅ Add to Cart button event
	document.querySelectorAll(".cart-btn").forEach(btn => {
		btn.addEventListener("click", () => {
			const id = btn.getAttribute("data-id");
			moveToCart(id);
		});
	});
}

// ------------------ ADD TO CART FUNCTION ------------------ //
function moveToCart(id) {
	const item = wishlistData.find(x => x.id === id);
	if (item) {
		item.status = "Moved to Cart"; // update status
		renderTable(); // re-render table
	}
}

		// ------------------ MODAL HANDLING ------------------ //
		let deleteId = null;

		function openDeleteModal(id) {
			deleteId = id;
			document.getElementById("deleteContent").textContent =
				`Are you sure you want to delete wishlist item #${id}?`;
			document.getElementById("deleteModal").style.display = "flex";
		}

		function closeModal(modalId) {
			document.getElementById(modalId).style.display = "none";
		}

		function confirmDelete() {
			if (deleteId) {
				// remove item from array
				const index = wishlistData.findIndex(item => item.id === deleteId);
				if (index !== -1) {
					wishlistData.splice(index, 1);
				}
				renderTable();
				closeModal("deleteModal");
				deleteId = null;
			}
		}


		function renderPagination() {
			const totalPages = Math.max(1, Math.ceil(wishlistData.length / itemsPerPage));
			document.getElementById("page-indicator").textContent = `${currentPage}/${totalPages}`;

			const prevBtn = document.getElementById("prev").parentElement;
			const nextBtn = document.getElementById("next").parentElement;

			// Prev button disable/enable
			if (currentPage === 1) {
				document.getElementById("prev").disabled = true;
				prevBtn.classList.add("disabled");
			} else {
				document.getElementById("prev").disabled = false;
				prevBtn.classList.remove("disabled");
			}

			// Next button disable/enable
			if (currentPage === totalPages) {
				document.getElementById("next").disabled = true;
				nextBtn.classList.add("disabled");
			} else {
				document.getElementById("next").disabled = false;
				nextBtn.classList.remove("disabled");
			}
		}


		document.getElementById("prev").addEventListener("click", () => {
			if (currentPage > 1) {
				currentPage--;
				renderTable();
			}
		});

		document.getElementById("next").addEventListener("click", () => {
			const totalPages = Math.ceil(wishlistData.length / itemsPerPage);
			if (currentPage < totalPages) {
				currentPage++;
				renderTable();
			}
		});

		renderTable();
	</script>
</body>

</html>