<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Admin Panel Sidebar</title>

	<!-- Font Awesome & Bootstrap Icons -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
	<link rel="stylesheet" href="/pages/sidebar.css">
	<link rel="stylesheet" href="/Assets/styles/dashboard.css">

</head>

<body>
	<div class="sidebar" id="sidebar">
		<div class="h_sidebar-header">
			<img src="/Assets/mv_img/Jeans.webp" alt="logo">
			<span>Vesture</span>
		</div>
		<ul class="menu-items">
			<!-- Dashboard -->
			<li class="menu-item active" data-page="Dashboard">
				<h5>
					<i class="bi bi-speedometer2"></i><span>Dashboard</span>
				</h5>
			</li>

			<!-- Category -->
			<li class="menu-item dropdown" id="categoryMenu">
				<h5 class="d-flex justify-content-between align-items-center">
					<span class="d-flex align-items-center">
						<i class="bi bi-tags me-2"></i>
						<span>Category</span>
					</span>
					<i class="bi bi-chevron-down toggle-icon"></i>
				</h5>
				<ul class="submenu">
					<li class="menu-item" data-page="Category">
						<h5><i class="bi bi-list-ul me-2"></i><span>All Categories</span></h5>
					</li>
					<li class="menu-item" data-page="Addcategory">
						<h5><i class="bi bi-plus-circle me-2"></i><span>Add Category</span></h5>
					</li>
				</ul>
			</li>

			<!-- Subcategory -->
			<li class="menu-item dropdown" id="subcategoryMenu">
				<h5 class="d-flex justify-content-between align-items-center">
					<span class="d-flex align-items-center">
						<i class="bi bi-diagram-3 me-2"></i>
						<span>Subcategory</span>
					</span>
					<i class="bi bi-chevron-down toggle-icon"></i>
				</h5>
				<ul class="submenu">
					<li class="menu-item" data-page="SubCategory">
						<h5><i class="bi bi-list-ul"></i><span>All Subcategories</span></h5>
					</li>
					<li class="menu-item" data-page="Addsubcategory">
						<h5><i class="bi bi-plus-circle"></i><span>Add Subcategory</span></h5>
					</li>
				</ul>
			</li>

			<!-- Products -->
			<li class="menu-item dropdown" id="productsMenu1">
				<h5 class="d-flex justify-content-between align-items-center">
					<span class="d-flex align-items-center">
						<i class="bi bi-box-seam me-2"></i>
						<span>Products</span>
					</span>
					<i class="bi bi-chevron-down toggle-icon"></i>
				</h5>
				<ul class="submenu">
					<li class="menu-item" data-page="ProductList">
						<h5><i class="bi bi-list-ul"></i><span>Product List</span></h5>
					</li>
					<li class="menu-item" data-page="ViewProduct">
						<h5><i class="bi bi-eye"></i><span>View Product</span></h5>
					</li>
					<li class="menu-item" data-page="AddProduct">
						<h5><i class="bi bi-plus-circle"></i><span>Add Product</span></h5>
					</li>
				</ul>
			</li>

			<!-- Coupons -->
			<li class="menu-item dropdown" id="couponsMenu">
				<h5 class="d-flex justify-content-between align-items-center">
					<span class="d-flex align-items-center gap-2">
						<i class="bi bi-ticket-perforated"></i>
						<span>Coupons</span>
					</span>
					<i class="bi bi-chevron-down toggle-icon"></i>
				</h5>
				<ul class="submenu">
					<li class="menu-item" data-page="CouponList">
						<h5><i class="bi bi-list-ul"></i><span>Coupon List</span></h5>
					</li>
					<li class="menu-item" data-page="AddCoupon">
						<h5><i class="bi bi-plus-circle"></i><span>Add Coupon</span></h5>
					</li>
				</ul>
			</li>

			<!-- Purchases / Orders -->
			<li class="menu-item dropdown" id="ordersMenu">
				<h5 class="d-flex justify-content-between align-items-center">
					<span class="d-flex align-items-center">
						<i class="bi bi-cart4 me-2"></i>
						<span>Purchases / Order</span>
					</span>
					<i class="bi bi-chevron-down toggle-icon"></i>
				</h5>
				<ul class="submenu">
					<li class="menu-item" data-page="OrderList">
						<h5><i class="bi bi-list-ul"></i><span>Order List</span></h5>
					</li>
					<li class="menu-item" data-page="ShoppingCart">
						<h5><i class="bi bi-cart-check"></i><span>Shopping Cart</span></h5>
					</li>
					<li class="menu-item" data-page="Whishlist">
						<h5><i class="bi bi-heart"></i><span>Wishlist</span></h5>
					</li>
					<li class="menu-item" data-page="Checkout">
						<h5><i class="bi bi-bag-check"></i><span>Checkout</span></h5>
					</li>
				</ul>
			</li>

			<!-- Users -->
			<li class="menu-item dropdown" id="usersMenu1">
				<h5 class="d-flex justify-content-between align-items-center">
					<span class="d-flex align-items-center gap-2">
						<i class="bi bi-people"></i>
						<span>Users</span>
					</span>
					<i class="bi bi-chevron-down toggle-icon"></i>
				</h5>
				<ul class="submenu">
					<li class="menu-item" data-page="UserList">
						<h5><i class="bi bi-list-ul"></i><span>User List</span></h5>
					</li>
					<li class="menu-item" data-page="AddUser">
						<h5><i class="bi bi-person-plus"></i><span>Add User</span></h5>
					</li>
				</ul>
			</li>

			<!-- Settings -->
			<li class="menu-item" data-page="Setting">
				<h5>
					<i class="bi bi-gear"></i><span>Setting</span>
				</h5>
			</li>
		</ul>

	</div>

	<button class="toggle-btn" id="toggleBtn"><i class="fas fa-arrow-left"></i></button>

	<!-- Topbar Section -->
	<div class="h_main_topbar">
		<div class="d-flex justify-content-between align-items-center">
			<div class="h_topbar-main-title d-flex gap-2 align-items-center">
				<h2>Good Morning!</h2>
				<img src="https://cdn-user-icons.flaticon.com/206639/206639390/1755728671230.svg?token=exp=1755684519~hmac=e724cad1f23642c87dfd5da3d4fb268d"
					alt="" class="text-white mb-0 h_navbar_hello-icon">
			</div>
			<div class="h_topbar_main-last d-flex align-items-center gap-3 text-white">

				<!-- Notification Icon -->
				<div class="h_topbar_notification position-relative">
					<i class="bi bi-bell h_topbar_icon" style="cursor:pointer;"></i>
					<span
						class="h_topbar_notif-count position-absolute start-100 translate-middle h_navbar_badge rounded-pill bg-danger">
						2
					</span>
				</div>

				<!-- Admin Section -->
				<div class="h_topbar_admin d-flex align-items-center gap-2 dropdown" style="cursor: pointer;">
					<!-- Admin image -->
					<img src="https://cdn-icons-png.flaticon.com/512/219/219983.png" alt="Admin"
						class="h_topbar_admin-img rounded-circle">
					<!-- Admin name -->
					<span class="h_topbar_admin-name">Admin</span>
					<!-- Dropdown arrow -->
					<i class="bi bi-chevron-down h_topbar_admin-dropdown" style="cursor:pointer;"></i>

					<!-- Dropdown menu -->
					<ul class="h_navbar_dropdown-menu dropdown-menu dropdown-menu-start" id="adminDropdown" style="display:none;">
						<li><a class="dropdown-item" href="#">Profile</a></li>
						<li><a class="dropdown-item" href="#">Settings</a></li>
						<li>
							<hr class="dropdown-divider">
						</li>
						<li><a class="dropdown-item" href="#">Logout</a></li>
					</ul>
				</div>

			</div>
		</div>
	</div>

	<div class="content" id="content">
		<!-- Dashboard content directly -->

		<div id="pageContainer">
			<div id="dashboard-root" class="h_dashboard_root">
				<!-- Dashboard Overview -->
				<h2 class="mb-4 h_dashboad_main_title">Dashboard Overview</h2>
				<div class="h_chart-card h_dashboard_intro">
					<h4>Vesture Admin Panel — Your Hub for Clothing Production Management</h4>
					<p>Easily manage categories, products, orders, and users — all from one intuitive dashboard</p>
				</div>

				<div class="h_main-cards">
					<div class="row g-4 mb-5">
						<div class="col-12 col-sm-6 col-md-3">
							<div class="card card-rounded">
								<h5>Current Stock</h5>
								<p>1,254 <small>items</small></p>
							</div>
						</div>
						<div class="col-12 col-sm-6 col-md-3">
							<div class="card card-rounded">
								<h5>Total Sales</h5>
								<p class="currency">CA$ 75,430.00</p>
							</div>
						</div>
						<div class="col-12 col-sm-6 col-md-3">
							<div class="card card-rounded">
								<h5>Purchases</h5>
								<p class="currency">CA$ 32,150.00</p>
							</div>
						</div>
						<div class="col-12 col-sm-6 col-md-3">
							<div class="card card-rounded">
								<h5>Pending Orders</h5>
								<p>24</p>
							</div>
						</div>
					</div>
				</div>

				<!-- Charts Section -->
				<div class="row mb-4 h_chart_section_01">
					<div class="col-md-8">
						<div class="h_chart-card card-rounded">
							<h4 class="h_chart-title h_dashboad_main_title">Monthly Sales Trend</h4>
							<div class="h_chart-container" style="height:260px;">
								<canvas id="salesTrendChart"></canvas>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="h_chart-card card-rounded">
							<h4 class="h_chart-title h_dashboad_main_title">Category Distribution</h4>
							<div class="h_chart-container" style="height:260px;">
								<canvas id="categoryDonutChart"></canvas>
							</div>
						</div>
					</div>
				</div>

				<div class="row mb-4">
					<div class="col-12">
						<div class="card h_recent-orders shadow-sm">
							<div class="card-body">
								<div class="d-flex justify-content-between align-items-center mb-2">
									<h6 class="mb-0 h_chart-title h_dashboad_main_title">Recent Orders</h6>
									<div class="d-flex gap-2">
										<button class="btn btn-sm btn-outline-secondary">View All</button>
									</div>
								</div>

								<div class="h_table-responsive">
									<div class="table-scroll">
										<table
											class="table table-hover table-borderless align-middle mb-0 h_recent-orders-table">
											<thead>
												<tr>
													<th>Order ID</th>
													<th>Customer</th>
													<th>Qty</th>
													<th>Stage</th>
													<th>ETA</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>ORD-1001</td>
													<td>Alpha Apparels</td>
													<td>150</td>
													<td><span class="badge badge-chip">Cutting</span></td>
													<td>2025-08-16</td>
												</tr>
												<tr>
													<td>ORD-1002</td>
													<td>Zenith</td>
													<td>80</td>
													<td><span class="badge badge-chip">Stitching</span></td>
													<td>2025-08-18</td>
												</tr>
												<tr>
													<td>ORD-1003</td>
													<td>Starlit</td>
													<td>200</td>
													<td><span class="badge badge-chip">Packing</span></td>
													<td>2025-08-15</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="row mb-4">
					<div class="col-lg-6">
						<div class="h_chart-card card-rounded">
							<h4 class="h_chart-title h_dashboad_main_title">Top Selling Products</h4>
							<div class="h_chart-container" style="height:300px;">
								<canvas id="topProductsChart"></canvas>
							</div>
						</div>
					</div>
					<div class="col-lg-6">
						<div class="h_chart-card card-rounded">
							<h4 class="h_chart-title h_dashboad_main_title">Production vs Sales</h4>
							<div class="h_chart-container" style="height:300px;">
								<canvas id="productionSalesChart"></canvas>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Other pages will load in iframe -->
			<iframe id="pageFrame" style="display:none;"></iframe>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

	<!-- chart activate code -->
	<script>
		document.addEventListener('DOMContentLoaded', () => {
			if (window.initCharts) window.initCharts();
		});
	</script>
	<!-- sidebar collapse and expand code -->
	<!-- replace your sidebar JS with this -->
	<script>
		document.addEventListener('DOMContentLoaded', () => {
			const sidebar = document.getElementById('sidebar');
			const toggleBtn = document.getElementById('toggleBtn');
			const menuItems = Array.from(document.querySelectorAll('.menu-item[data-page]'));
			const dashboardRoot = document.getElementById('dashboard-root');
			const pageFrame = document.getElementById('pageFrame');

			// Dropdown toggles
			document.querySelectorAll('.menu-item.dropdown > h5').forEach(header => {
				header.addEventListener('click', e => {
					e.stopPropagation();
					const menu = header.parentElement;
					const submenu = menu.querySelector('.submenu');
					if (!submenu) return;
					submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
				});
			});

			function setActiveByPage(page) {
				menuItems.forEach(item => {
					// Compare lowercased without leading slash/hash
					item.classList.toggle('active', item.getAttribute('data-page').toLowerCase() === page.toLowerCase());
				});
			}

			function showDashboard(updateHash = false) {
				dashboardRoot.style.display = 'block';
				pageFrame.style.display = 'none';
				pageFrame.src = '';
				setActiveByPage('Dashboard/Dashboard');
				if (updateHash) location.hash = '#Dashboard/Dashboard';
			}

			function showPage(page, updateHash = false) {
				dashboardRoot.style.display = 'none';
				pageFrame.style.display = 'block';
				// iframe points to actual file
				pageFrame.src = `/pages/components/${page}.html`;
				setActiveByPage(page);
				if (updateHash) location.hash = `#${page}`;
			}

			// Read route from hash (like #Category or #Dashboard/Dashboard)
			function getRouteFromHash() {
				const hash = (location.hash || '').replace(/^#/, '');
				return hash || 'Dashboard/Dashboard';
			}

			function loadFromHash() {
				const route = getRouteFromHash();
				if (!route || route.toLowerCase().includes('dashboard')) {
					showDashboard(false);
					return;
				}
				showPage(route, false);
			}

			// Click handlers
			menuItems.forEach(item => {
				item.addEventListener('click', e => {
					e.preventDefault();
					e.stopPropagation();
					const page = item.getAttribute('data-page');
					if (page.toLowerCase().includes('dashboard')) {
						showDashboard(true);
					} else {
						showPage(page, true);
					}
				});
			});

			// When user navigates with back/forward or refresh (hashchange fires on back/forward and refresh)
			window.addEventListener('hashchange', loadFromHash);

			// Toggle sidebar behaviour
			toggleBtn.addEventListener('click', () => {
				if (window.innerWidth <= 768) {
					sidebar.classList.toggle('show');
					toggleBtn.classList.toggle('active');
				} else {
					sidebar.classList.toggle('collapsed');
					toggleBtn.classList.toggle('moved');
				}
				updateToggleIcon();
			});

			function updateToggleIcon() {
				if (window.innerWidth <= 768) {
					toggleBtn.innerHTML = '<i class="fas fa-bars"></i>';
				} else {
					toggleBtn.innerHTML = sidebar.classList.contains('collapsed') ? '<i class="fas fa-arrow-right"></i>' : '<i class="fas fa-arrow-left"></i>';
				}
			}
			window.addEventListener('resize', updateToggleIcon);
			updateToggleIcon();

			// Initial load from hash (works on refresh too)
			loadFromHash();
		});
	</script>

	<!-- navbar admin dropdown code -->
	<script>
		const dropdownArrow = document.querySelector('.h_topbar_admin');
		const dropdownMenu = document.getElementById('adminDropdown');

		dropdownArrow.addEventListener('click', () => {
			if (dropdownMenu.style.display === 'block') {
				dropdownMenu.style.display = 'none';
			} else {
				dropdownMenu.style.display = 'block';
			}
		});

		// Optional: hide dropdown when clicking outside
		document.addEventListener('click', (e) => {
			if (!dropdownArrow.contains(e.target) && !dropdownMenu.contains(e.target)) {
				dropdownMenu.style.display = 'none';
			}
		});
	</script>


	<script src="/Dashboard.js"></script>

</body>

</html>