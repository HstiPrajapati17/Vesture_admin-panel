<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Add User — Clothing Manufacturing Admin</title>

	<!-- Bootstrap (used by markup classes) -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/Sidebar.css">
	<link rel="stylesheet" href="/css/customer.css">
</head>

<body class="add_user_body">

	<!-- Sidebar container -->
	<div id="sidebar-container"></div>

	<!-- Navbar container -->
	<div id="navbar-container"></div>

	<main class="main-content" id="main-content">
		<div class="h_wrapper">
			<div class="h_sheet">
				<!-- Header -->
				<div class="h_sheet-header">
					<div class="h_title">
						<i class="bi bi-person-plus-fill fs-4"></i>
						<span>Add Customer</span>
					</div>
				</div>

				<div class="row g-0" style="background: #f6f6f6;">
					<!-- Left: Photo & quick settings -->
					<div class="col-lg-4 h_profile-col">
						<h6 class="mb-2">Customer Photo</h6>
						<label class="h_upload-area w-100" for="photoInput">
							<i class="bi bi-cloud-arrow-up-fill fs-3 d-block mb-2" style="color:var(--primary)"></i>
							<strong>Drag & drop</strong> or <u>click to browse</u>
							<div class="h_mini-note mt-1">Max 5MB • PNG, JPG, JPEG</div>
							<input id="photoInput" type="file" accept="image/png,image/jpeg">
							<img id="photoPreview" alt="Preview" class="h_preview">
						</label>

						<div class="h_divider"></div>
						<h6 class="h_section-label mb-3">Quick Settings</h6>
						<div class="form-check form-switch h_form-switch mb-2">
							<input class="form-check-input" type="checkbox" id="isActive" checked>
							<label class="form-check-label ms-2" for="isActive">Active account</label>
						</div>
						<div class="form-check form-switch h_form-switch">
							<input class="form-check-input" type="checkbox" id="emailNotify" checked>
							<label class="form-check-label ms-2" for="emailNotify">Send welcome email</label>
						</div>

						<div class="h_divider"></div>
						<h6 class="h_section-label mb-3">Customer Type</h6>
						<select class="h_custom-select" id="type" required>
							<option value="" disabled selected>Select type</option>
							<option>Retail</option>
							<option>Wholesale</option>
							<option>VIP</option>
						</select>
					</div>

					<!-- Right: Form -->
					<div class="col-lg-8 p-4 h_adduser_basic_info">
						<form id="addCustomerForm" class="needs-validation" novalidate>
							<label class="h_custom-label">Full Name</label>
							<input type="text" id="name" class="h_custom-input" required>

							<label class="h_custom-label">Email</label>
							<input type="email" id="email" class="h_custom-input" required>

							<label class="h_custom-label">Phone</label>
							<input type="text" id="phone" class="h_custom-input" required>

							<label class="h_custom-label">City</label>
							<input type="text" id="city" class="h_custom-input" required>

							<button type="submit" class="btn btn-primary mt-3">Create Customer</button>
						</form>

					</div>
				</div>

			</div>
		</div>
	</main>

	<!-- Overlay for mobile -->
	<div class="overlay"></div>

	<!-- Bootstrap JS bundle -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="/js/sidebar-loader.js"></script>
	<script src="/js/navbar-loader.js"></script>

	<script>
		// Image preview (ids unchanged)
		const input = document.getElementById('photoInput');
		const preview = document.getElementById('photoPreview');
		input.addEventListener('change', (e) => {
			const file = e.target.files?.[0];
			if (!file) return;
			if (file.size > 5 * 1024 * 1024) {
				alert('File too large. Max 5MB.');
				input.value = '';
				preview.style.display = 'none';
				return;
			}
			const url = URL.createObjectURL(file);
			preview.src = url;
			preview.style.display = 'block';
		});

		// Password show/hide toggles (ids unchanged)
		function toggleField(iconId, inputId) {
			const icon = document.getElementById(iconId);
			const field = document.getElementById(inputId);
			icon.addEventListener('click', () => {
				const show = field.type === 'password';
				field.type = show ? 'text' : 'password';
				icon.classList.toggle('bi-eye', show);
				icon.classList.toggle('bi-eye-slash', !show);
			});
		}
		toggleField('togglePass', 'password');
		toggleField('togglePass2', 'confirmPassword');

		// Bootstrap validation + confirm password match
		(function () {
			const form = document.querySelector('.needs-validation');
			form.addEventListener('submit', function (event) {
				const pass = document.getElementById('password');
				const cpass = document.getElementById('confirmPassword');
				if (pass.value !== cpass.value) {
					cpass.setCustomValidity('Mismatch');
				} else {
					cpass.setCustomValidity('');
				}
				if (!form.checkValidity()) {
					event.preventDefault();
					event.stopPropagation();
				}
				form.classList.add('was-validated');
			}, false);
		})();
	</script>
</body>

</html>