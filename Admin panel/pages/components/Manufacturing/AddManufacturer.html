<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ClothMan Admin — Add / Edit Manufacturer</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/Sidebar.css">
  <link rel="stylesheet" href="/css/category.css">
  <link rel="stylesheet" href="/css/myprofile.css">
</head>

<body>
  <!-- Sidebar -->
  <div id="sidebar-container"></div>

  <!-- Navbar -->
  <div id="navbar-container"></div>

  <main class="main-content" id="main-content">
    <div class="h_container-app">
      <div class="h_sheet" role="main" aria-labelledby="pageTitle">

        <!-- Header -->
        <header class="h_sheet-header">
          <div class="h_title" id="pageTitle"><i class="bi bi-building-gear"></i>
            <span id="pageMode">Add Manufacturer</span>
          </div>
        </header>

        <!-- Body -->
        <div class="h_sheet-body">

          <!-- Left column: Logo & settings -->
          <aside class="h_col-left">
            <h6 class="mb-2">Manufacturer Logo</h6>

            <label class="h_upload-area" id="uploadZone" for="manufacturerLogo">
              <i class="bi bi-cloud-arrow-up-fill fs-3 d-block mb-2" style="color:var(--primary)"></i>
              <strong>Drag & drop</strong> or <u>click to browse</u>
              <div class="h_upload-hint mt-2">Max file size: 5MB • PNG, JPG, JPEG</div>
              <input id="manufacturerLogo" type="file" accept="image/png,image/jpeg">
              <img id="singlePreview" class="h_preview" alt="Preview" style="display:none">
            </label>

            <div style="height:1px;background:var(--soft);margin:16px 0"></div>

            <h6 class="h_section-label">Quick Settings</h6>

            <div class="form-check form-switch h_form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="isVisible" checked>
              <label class="form-check-label ms-2" for="isVisible">Visible in system</label>
            </div>

            <!-- <div class="mt-3 mb-3">
              <label class="h_field-label">Status</label>
              <div class="d-flex align-items-center gap-4">
                <label class="h_radio">
                  <input type="radio" name="statusRadio" value="active" checked>
                  Active
                </label>
                <label class="h_radio">
                  <input type="radio" name="statusRadio" value="inactive">
                  Inactive
                </label>
              </div>
            </div> -->
          </aside>

          <!-- Right column: Form -->
          <section class="h_col-right">
            <form id="manufacturerForm" class="needs-validation" novalidate>

              <h6 class="h_section-label mb-3">Manufacturer Information</h6>

              <div class="mb-3">
                <label class="h_field-label" for="name">Manufacturer Name</label>
                <input id="name" type="text" class="h_dark-input" placeholder="Enter manufacturer name" required>
                <div class="invalid-feedback">Please enter manufacturer name.</div>
              </div>

              <div class="mb-3">
                <label class="h_field-label" for="contact">Contact Person</label>
                <input id="contact" type="text" class="h_dark-input" placeholder="Enter contact person name" required>
                <div class="invalid-feedback">Please enter contact person.</div>
              </div>

              <div class="mb-3">
                <label class="h_field-label" for="email">Email</label>
                <input id="email" type="email" class="h_dark-input" placeholder="Enter email address" required>
                <div class="invalid-feedback">Please enter valid email.</div>
              </div>

              <div class="mb-3">
                <label class="h_field-label" for="phone">Phone</label>
                <input id="phone" type="text" class="h_dark-input" placeholder="Enter phone number">
              </div>

              <div class="mb-3">
                <label class="h_field-label" for="address">Address</label>
                <textarea id="address" class="h_dark-textarea" placeholder="Manufacturer address"></textarea>
              </div>

              <div class="d-flex justify-content-end flex-wrap gap-2 mt-3">
                <button type="button" class="btn h_btn-outline-primary" id="cancelBtn"><i class="bi bi-x-circle me-1"></i>Cancel</button>
                <button type="submit" class="btn h_btn-primary"><i class="bi bi-check2-circle me-1"></i><span id="saveText">Add Manufacturer</span></button>
              </div>
            </form>
          </section>
        </div>
      </div>
    </div>
  </main>

  <!-- Overlay for mobile -->
  <div class="overlay"></div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/sidebar-loader.js"></script>
  <script src="/js/navbar-loader.js"></script>

  <script>
    // Cancel button → back to list
    document.getElementById('cancelBtn').addEventListener('click', () => {
      window.location.href = 'Manufacturers.html';
    });

    // Upload preview
    (function () {
      const input = document.getElementById('manufacturerLogo');
      const preview = document.getElementById('singlePreview');
      input.addEventListener('change', () => {
        if (!input.files.length) return;
        const file = input.files[0];
        if (!file.type.startsWith('image/')) return;
        const url = URL.createObjectURL(file);
        preview.src = url; preview.style.display = 'block';
        preview.onload = () => URL.revokeObjectURL(url);
      });
    })();

    // Form validation
    (function () {
      const form = document.getElementById('manufacturerForm');
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');

        // Demo payload
        if (form.checkValidity()) {
          event.preventDefault();
          const payload = {
            name: document.getElementById('name').value.trim(),
            contact: document.getElementById('contact').value.trim(),
            email: document.getElementById('email').value.trim(),
            phone: document.getElementById('phone').value.trim(),
            address: document.getElementById('address').value.trim(),
            status: document.querySelector('input[name="statusRadio"]:checked')?.value || 'active',
            visible: document.getElementById('isVisible').checked
          };
          console.log('Manufacturer payload', payload);
          alert('Manufacturer saved (demo). Check console for payload.');
        }
      }, false);
    })();
  </script>
</body>
</html>
